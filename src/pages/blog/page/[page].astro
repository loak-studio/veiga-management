---
import type {GetStaticPathsOptions } from "astro";


import { storyblokApi } from "../../../utils/storyblok";
import type { StoryblokClient } from "@storyblok/js";
import Main from "../../../layouts/Main.astro";
import Pagination from "../../../components/blog/Pagination.astro";
export async function getStaticPaths({ paginate }: GetStaticPathsOptions) {
  const { data } = await (storyblokApi as StoryblokClient).get("cdn/stories", {
    version: "draft",
    starts_with:'blog',
    sort_by:'content.date:desc'
  });

  return paginate(data.stories, { pageSize: 8 });
}
const {page} = Astro.props
const metatags = {
  title: "Page",
  description: "Description",
  image:"",
};

console.log(page)
---

<Main meta={metatags}>
  {page.data.map(article=><p>{article.name}</p>)}
  <Pagination currentPage={page.currentPage} maxPage={page.lastPage}/>
</Main>